version: '3'

services:
  iot:
    image: groupe_b_9/server:latest
    build:
      context: ./IoT-Gateway/
      dockerfile: Dockerfile
    container_name : IotGateway
    depends_on:
      - "HTTPserver"
    environment:
      NUMBERPORTS: "4"
      DESTINATIONTCP: "HTTPserver"


  sensor1:
    image: groupe_b_9/sensor:latest
    build:
      context: ./Sensor/
      dockerfile: Dockerfile
    container_name: Sensor1
    depends_on:
      - "HTTPserver"
    environment:
       DESTINATION: "iot"
       SENSOR_NAME: "Heizung Wohnzimmer"
       SENSOR_TYPE: "Temperatur"
       SENSOR_ID: "1"

  sensor2:
    image: groupe_b_9/sensor:latest

    build:
     context: ./Sensor/
     dockerfile: Dockerfile
    container_name: Sensor2
    depends_on:
      - "HTTPserver"
    environment:
     DESTINATION: "iot"
     SENSOR_NAME: "Dachterrasse"
     SENSOR_TYPE: "Helligkeit"
     SENSOR_ID: "2"

  sensor3:
    image: groupe_b_9/sensor:latest

    build:
      context: ./Sensor/
      dockerfile: Dockerfile
    container_name: Sensor3
    depends_on:
      - "HTTPserver"
    environment:
      DESTINATION: "iot"
      SENSOR_NAME: "Dachterrasse"
      SENSOR_TYPE: "Niederschlag"
      SENSOR_ID: "3"

  sensor4:
    image: groupe_b_9/sensor:latest

    build:
      context: ./Sensor/
      dockerfile: Dockerfile
    depends_on:
        - "HTTPserver"
    container_name: Sensor4
    environment:
      DESTINATION: "iot"
      SENSOR_NAME: "Dach"
      SENSOR_TYPE: "Wind"
      SENSOR_ID: "4"

  HTTPserver:
    image: groupe_b_9/httpserver:latest

    build:
      context: ./HTTP-Server/
      dockerfile: Dockerfile
    container_name: HTTP-Server




